<!DOCTYPE html>

<html lang="en">



    <head>
        <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <title>Webpage</title>

        <!-- CSS only -->

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

<!-- JavaScript Bundle with Popper -->

<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</head>

<body>

    <script src="promise6.js">
 const posts=[
    {title : 'Post 1' , body : 'This is post 1'},
    {title : 'Post 2' , body : 'This is post 2'}
]
const user={
    username : "Rohit",
    lastActivity: new Date()
}

function updateUserActivity(){
   return new Promise((resolve,reject)=>{
    setTimeout(()=>{
        user.lastActivity=new Date()
        
    resolve()
    },1000)
    
   })
    
}
function getPosts(){
    
    setTimeout(()=>{
        let output='';
         posts.forEach((element) => {

           output+=`<li>${element.title} </li>`;
         });
         document.body.innerHTML=output;
    },1000)
}

const createPost=async (post)=>{
    return new Promise((resolve,reject) => {
        setTimeout(()=>{
            updateUserActivity().then(console.log(user.lastActivity))
            posts.push(post);
            
            const error=false;

            if(!error)
            {
                resolve();
            }
            else
            {
                reject('Error : something went wrong')
            }
            
          },2000)
    })
}
   


const deletePost=async ()=>
{
    return new Promise((resolve, reject) => {
        setTimeout(()=>{
           
            updateUserActivity().then(console.log(user.lastActivity))
           const error=posts.length
           if(error>0)
            {
                
                resolve(posts.pop());
            }
            else
            {
                reject('Error : array is empty')
            }
        },5000)
    })
}


createPost({title : 'Post 3' , body : 'This is post 3'}).then(getPosts).catch(err=>console.log(err))
deletePost().then(getPosts).catch(err=>console.log(err))
deletePost().then(getPosts).catch(err=>console.log(err))
deletePost().then(getPosts).catch(err=>console.log(err))
deletePost().then(getPosts).catch(err=>console.log(err))

    setTimeout(()=>{
        createPost({title : 'Post 4' , body : 'This is post 4'}).then(getPosts).then(deletePost).then(getPosts)
.catch(err=>console.log(err))
    },1000)




const promise1=Promise.resolve("Hello")
const promise2=10;
const promise3=new Promise((resolve,reject)=>setTimeout(resolve,2000,"Goodbye"))

Promise.all([promise1,promise2,promise3]).then(values=>console.log(values))




    </script>
</body>
</html>